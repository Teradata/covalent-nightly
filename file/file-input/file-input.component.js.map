{"version":3,"file":"file-input.component.js","sourceRoot":"","sources":["file-input.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Directive, Input, Output, EventEmitter, ChangeDetectionStrategy, ViewChild,\n         ElementRef, Renderer, TemplateRef, ViewContainerRef, ChangeDetectorRef, forwardRef } from '@angular/core';\nimport { TemplatePortalDirective } from '@angular/material';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nconst noop: any = () => {\n  // empty method\n};\n\nexport const FILE_INPUT_CONTROL_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => TdFileInputComponent),\n  multi: true,\n};\n\n@Directive({\n  selector: '[td-file-input-label]template',\n})\nexport class TdFileInputLabelDirective extends TemplatePortalDirective {\n  constructor(templateRef: TemplateRef<any>, viewContainerRef: ViewContainerRef) {\n    super(templateRef, viewContainerRef);\n  }\n}\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [ FILE_INPUT_CONTROL_VALUE_ACCESSOR ],\n  selector: 'td-file-input',\n  styleUrls: ['./file-input.component.css'],\n  templateUrl: './file-input.component.html',\n})\nexport class TdFileInputComponent implements ControlValueAccessor {\n\n  /**\n   * Implemented as part of ControlValueAccessor.\n   */\n  private _value: FileList | File = undefined;\n\n  // get/set accessor (needed for ControlValueAccessor)\n  get value(): FileList | File { return this._value; };\n  set value(v: FileList | File) {\n    if (v !== this._value) {\n      this._value = v;\n      this.onChange(v);\n    }\n  }\n\n  private _multiple: boolean = false;\n  private _disabled: boolean = false;\n\n  /** The native `<input type=\"file\"> element */\n  @ViewChild('fileInput') private _inputElement: ElementRef;\n  get inputElement(): HTMLInputElement {\n    return this._inputElement.nativeElement;\n  }\n\n  /**\n   * color?: string\n   * Sets button color. Uses same color palette accepted as [mdButton].\n   */\n  @Input('color') color: string;\n\n  /**\n   * multiple?: boolean\n   * Sets if multiple files can be dropped/selected at once in [TdFileInputComponent].\n   */\n  @Input('multiple')\n  set multiple(multiple: string | boolean) {\n    this._multiple = multiple !== '' ? (multiple === 'true' || multiple === true) : true;\n  }\n  get multiple(): string | boolean {\n    return this._multiple;\n  }\n\n  /**\n   * accept?: string\n   * Sets files accepted when opening the file browser dialog.\n   * Same as 'accept' attribute in <input/> element.\n   */\n  @Input('accept') accept: string;\n\n  /**\n   * disabled?: boolean\n   * Disables [TdFileInputComponent] and clears selected/dropped files.\n   */\n  @Input('disabled')\n  set disabled(disabled: boolean) {\n    if (disabled) {\n      this.clear();\n    }\n    this._disabled = disabled;\n  }\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  /**\n   * select?: function\n   * Event emitted a file is selected\n   * Emits a [File | FileList] object.\n   */\n  @Output('select') onSelect: EventEmitter<File | FileList> = new EventEmitter<File | FileList>();\n\n  constructor(private _renderer: Renderer, private _changeDetectorRef: ChangeDetectorRef) {\n\n  }\n\n  /**\n   * Method executed when a file is selected.\n   */\n  handleSelect(files: File | FileList): void {\n    this.writeValue(files);\n    this.onSelect.emit(files);\n  }\n\n  /**\n   * Used to clear the selected files from the [TdFileInputComponent].\n   */\n  clear(): void {\n    this.writeValue(undefined);\n    this._renderer.setElementProperty(this.inputElement, 'value', '');\n  }\n\n  /**\n   * Implemented as part of ControlValueAccessor.\n   */\n  writeValue(value: any): void {\n    this.value = value;\n    this._changeDetectorRef.markForCheck();\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  onChange = (_: any) => noop;\n  onTouched = () => noop;\n\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}